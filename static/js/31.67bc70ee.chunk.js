(this.webpackJsonpcovid19india=this.webpackJsonpcovid19india||[]).push([[31],{106:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(82),i=r(108),a=r(1),c=function(t){var e=Object(a.useState)(null),r=Object(n.a)(e,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){var e=t.current,r=new i.a((function(t,e){t.forEach((function(t,e){o(t.contentRect)}))}));return r.observe(e),function(){r.unobserve(e)}}),[t]),c}},275:function(t,e,r){"use strict";r.r(e);var n=r(20),i=r(33),a=r(118),c=r(109),o=r.n(c),s=r(201),l=r(6),u=r(106),d=r(32),f=r(188),p=r(276),j=r(131),b=r(256),m=r(242),v=r(260),O=r(234),h=r(130),g=r(187),x=r(129),k=r(236),y=r(1),T=r(271);var A=function(t){t.data;var e=t.mapViz,r=t.mapScale,i=t.statistic,a=Object(T.a)().t,c=Object(y.useRef)(null),o=Object(y.useRef)(),s=Object(u.a)(o);return Object(y.useEffect)((function(){var t,n=Object(k.a)(c.current),u=s||(null===(t=o.current)||void 0===t?void 0:t.getBoundingClientRect())||{width:0,height:0},y=u.width,T=u.height;if(y&&T)if(e===l.l.BUBBLES){var A=n.transition().duration(l.c);n.select(".ramp").transition(A).attr("opacity",0).attr("xlink:href",null),n.select(".bars").selectAll("rect").transition(A).attr("opacity",0).remove(),n.selectAll(".axis > *:not(.axistext)").remove(),n.select(".axistext").text("");var w=r.domain()[1];n.select(".circles").attr("transform","translate(48,40)").attr("text-anchor","middle").selectAll("circle").data([w/10,2*w/5,w]).join("circle").attr("fill","none").attr("stroke","#ccc").transition(A).attr("cy",(function(t){return-r(t)})).attr("r",r);var E=r.copy().range([0,-2*r(w)]);n.select(".circleAxis").attr("transform","translate(48,50)").transition(A).call(Object(j.b)(E).tickSize(0).tickPadding(0).tickValues([w/10,2*w/5,w]).tickFormat((function(t){return Object(d.e)(t,"short")}))).selectAll(".tick text").style("text-anchor","middle"),n.select(".circleAxis").call((function(t){return t.select(".domain").remove()}))}else n.call((function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.svg,r=t.color,n=t.title,i=t.tickSize,a=void 0===i?6:i,c=t.width,o=void 0===c?320:c,s=t.height,u=void 0===s?44+a:s,d=t.marginTop,k=void 0===d?18:d,y=t.marginRight,T=void 0===y?0:y,A=t.marginBottom,w=void 0===A?16+a:A,E=t.marginLeft,R=void 0===E?0:E,C=t.ticks,N=void 0===C?o/64:C,B=t.tickFormat,M=t.tickValues,L=t.ordinalWeights;e.selectAll(".circles > *").remove(),e.selectAll(".circleAxis > *").remove();var _,D=e.transition().duration(l.c),U=function(t){t.selectAll(".tick line").attr("y1",k+w-u)};if(r.interpolate){var F=Math.min(r.domain().length,r.range().length);_=r.copy().rangeRound(Object(m.a)(Object(v.a)(R,o-T),F)),e.select(".ramp").attr("class","ramp").attr("x",R).attr("y",k).attr("width",o-R-T).attr("height",u-k-w).attr("preserveAspectRatio","none").attr("xlink:href",S(r.copy().domain(Object(m.a)(Object(v.a)(0,1),F))).toDataURL())}else if(r.interpolator){if(e.select(".bars").selectAll("rect").transition(D).attr("opacity",0).remove(),_=Object.assign(r.copy().interpolator(Object(O.a)(R,o-T)),{range:function(){return[R,o-T]}}),e.select(".ramp").attr("class","ramp").attr("x",R).attr("y",k).attr("width",o-R-T).attr("height",u-k-w).attr("preserveAspectRatio","none").attr("xlink:href",S(r.interpolator()).toDataURL()).transition(D).attr("opacity",1),!_.ticks){if(void 0===M){var H=Math.round(N+1);M=Object(f.a)(H).map((function(t){return Object(p.a)(r.domain(),t/(H-1))}))}"function"!==typeof B&&(B=Object(b.a)(void 0===B?",f":B))}}else if(r.invertExtent){var I=r.thresholds?r.thresholds():r.quantiles?r.quantiles():r.domain(),V=void 0===B?function(t){return t}:"string"===typeof B?Object(b.a)(B):B;_=Object(h.a)().domain([-1,r.range().length-1]).rangeRound([R,o-T]),e.append("g").selectAll("rect").data(r.range()).join("rect").attr("x",(function(t,e){return _(e-1)})).attr("y",k).attr("width",(function(t,e){return _(e)-_(e-1)})).attr("height",u-k-w).attr("fill",(function(t){return t})),M=Object(f.a)(-1,I.length),B=function(t){return-1===t?V(1):t!==I.length-1?t===I.length-2?V(I[t]+"+",t):V(I[t],t):void 0}}else{if(e.select(".ramp").transition(D).attr("opacity",0).attr("xlink:href",null),L){var z=Object(h.a)().domain([0,L.reduce((function(t,e){return t+e}))]).rangeRound([0,o-R-T]),P=L.map((function(t,e){return L.slice(0,e).reduce((function(t,e){return t+z(e)}),R)}));_=Object(x.a)().domain(r.domain()).range(P),e.select(".bars").selectAll("rect").data(r.domain()).join((function(t){return t.append("rect").attr("x",_).attr("width",(function(t,e){return z(L[e])}))})).attr("y",k).attr("height",u-k-w).attr("fill",r).transition(D).attr("x",_).attr("width",(function(t,e){return z(L[e])})).attr("opacity",1)}else _=Object(g.a)().domain(r.domain()).rangeRound([R,o-T]),e.selectAll("rect").data(r.domain()).join("rect").attr("x",_).attr("y",k).attr("width",Math.max(0,_.bandwidth()-1)).attr("height",u-k-w).attr("fill",r);U=function(){}}return e.select(".axis").attr("transform","translate(0,".concat(u-w,")")).transition(D).attr("class","axis").call(Object(j.a)(_).ticks(N,"string"===typeof B?B:void 0).tickFormat("function"===typeof B?B:void 0).tickSize(a).tickValues(M)).on("start",(function(){e.call(U).call((function(t){return t.select(".domain").remove()}))})).call((function(t){return t.select(".axistext").attr("class","axistext").attr("x",R).attr("y",k+w-u-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").text(n)})),e.node()}({svg:n,color:r,title:"".concat(a(Object(d.a)(i))," ").concat(a("cases")),width:y,height:T,ticks:5,tickFormat:function(t,r,n){if(e!==l.l.CHOROPLETH||Number.isInteger(t))return r===n.length-1?Object(d.e)(t)+"+":Object(d.e)(t)},marginLeft:2,marginRight:0})}))}),[a,s,r,e,i]),Object(n.jsxs)("div",{className:"svg-parent maplegend",style:{height:l.h},ref:o,children:[Object(n.jsxs)("svg",{id:"legend",preserveAspectRatio:"xMidYMid meet",ref:c,children:[Object(n.jsx)("image",{className:"ramp"}),Object(n.jsx)("g",{className:"bars"}),Object(n.jsx)("g",{className:"circles"}),Object(n.jsx)("g",{className:"circleAxis"}),Object(n.jsx)("g",{className:"axis",children:Object(n.jsx)("text",{className:"axistext"})})]}),Object(n.jsx)("canvas",{className:"color-scale",style:{position:"absolute",height:0}})]})};function S(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=Object(k.a)(".color-scale").node(),n=(r.width=e,r.height=1,r).getContext("2d"),i=0;i<e;++i)n.fillStyle=t(i/(e-1)),n.fillRect(i,0,1,1);return r}var w=r(91),E=r(84),R=r.n(E),C=r(183),N=r(249),B=r(257),M=r(255),L=r(202),_=r(277),D=r(243),U=r(244),F=r(245),H=r(246),I=r(247),V=r(248),z=r(101),P=r(5),Y=r(117),q=r(207),W=function(t,e){return Object(d.h)(t,"total",e)};e.default=function(t){var e,r,c=this,u=t.mapCode,f=t.mapView,p=t.mapViz,j=t.data,b=(t.changeMap,t.regionHighlighted),m=t.setRegionHighlighted,v=t.statistic,O=(t.isCountryLoaded,Object(T.a)().t),h=Object(y.useRef)(null),g=l.i[u],x=Object(P.g)(),S=Object(Y.a)(g.geoDataFile,function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(N.a)(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{suspense:!1,revalidateOnFocus:!1}).data,E=Object(y.useMemo)((function(){var t=Object.keys(j).filter((function(t){return"TT"!==t&&Object.keys(l.i).includes(t)}));return f===l.k.STATES?Object(C.a)(t,(function(t){return W(j[t],v)})):Object(C.a)(t,(function(t){var e;return(null===(e=j[t])||void 0===e?void 0:e.districts)?Object(C.a)(Object.values(j[t].districts),(function(t){return W(t,v)})):0}))}),[j,f,v]),J=Object(y.useMemo)((function(){return W(j[u],v)}),[j,u,v]),G=Object(y.useMemo)((function(){return p===l.l.BUBBLES?Object(L.b)([0,Math.max(E,1)],[0,40]).clamp(!0).nice(3):Object(_.a)([0,Math.max(1,E)],function(t){switch(t){case"confirmed":return function(t){return Object(D.a)(.85*t)};case"active":return function(t){return Object(U.a)(.85*t)};case"recovered":return function(t){return Object(F.a)(.85*t)};case"deceased":return function(t){return Object(H.a)(.85*t)};case"tested":return function(t){return Object(I.a)(.85*t)};default:return function(t){return Object(V.a)(.85*t)}}}(v)).clamp(!0)}),[p,v,E]),K=Object(y.useMemo)((function(){return S?Object(B.a)(Object(M.a)()):null}),[S]),Q=Object(y.useCallback)((function(t){var e,r,n=l.r[t.properties.st_nm],i=t.properties.district,a=j[n],c=null===a||void 0===a||null===(e=a.districts)||void 0===e?void 0:e[i];return 0===(r=W(i?c:a,v))?"#ffffff00":G(r)}),[j,G,v]),X=Object(y.useCallback)((function(t){return l.u[v].color+t}),[v]),Z=Object(y.useMemo)((function(){return S?(f===l.k.STATES?q.a(S,S.objects.states).features:g.mapType===l.j.COUNTRY&&p===l.l.BUBBLES?[].concat(Object(a.a)(q.a(S,S.objects.states).features),Object(a.a)(q.a(S,S.objects.districts).features)):q.a(S,S.objects.districts).features).map((function(t){var e=t.properties.district,r=t.properties.st_nm,n=Object.assign({},t);return n.id="".concat(u,"-").concat(r).concat(e?"-"+e:""),n})):null}),[S,u,f,p,g]),$=Object(y.useCallback)((function(t){t.select("title").text((function(t){if(p===l.l.CHOROPLETH){var e,r,n=t.properties.st_nm,i=l.r[n],a=t.properties.district,c=j[i],o=null===c||void 0===c||null===(e=c.districts)||void 0===e?void 0:e[a];return r=W(a?o:c,v),Object(d.e)(r/(J||.001)*100)+"% from "+Object(d.l)(a||n)}}))}),[p,j,v,J]),tt=Object(y.useRef)(null);return Object(y.useEffect)((function(){Object(k.a)(h.current).attr("pointer-events","auto").on("click",(function(){tt.current=null,m({stateCode:u,districtName:null})}))}),[u,m]),Object(y.useEffect)((function(){if(S){var t=Object(k.a)(h.current),e=Object(z.b)().duration(l.c),r=t.select(".regions").selectAll("path").data(p!==l.l.BUBBLES?Z:[],(function(t){return t.id})).join((function(t){return t.append("path").attr("d",K).attr("stroke-width",1.8).attr("stroke-opacity",0).style("cursor","pointer").on("mouseenter",(function(t,e){tt.current||m({stateCode:l.r[e.properties.st_nm],districtName:e.properties.district})})).on("pointerdown",(function(t,e){tt.current===e?tt.current=null:tt.current=e,m({stateCode:l.r[e.properties.st_nm],districtName:e.properties.district})})).attr("fill","#fff0").attr("stroke","#fff0").call((function(t){t.append("title")}))}),(function(t){return t}),(function(t){return t.transition(e).attr("stroke","#fff0").attr("fill","#fff0").remove()})).attr("pointer-events","all").on("click",(function(e,r){var n;e.stopPropagation();var i=l.r[r.properties.st_nm];!tt.current&&g.mapType!==l.j.STATE&&(null===(n=j[i])||void 0===n?void 0:n.districts)&&(t.attr("pointer-events","none"),t.select(".regions").selectAll("path").attr("pointer-events","none"),x.push("/state/".concat(i).concat(window.innerWidth<769?"#MapExplorer":"")))})).call((function(t){t.transition(e).attr("fill",Q).attr("stroke",X.bind(c,""))}));window.requestIdleCallback((function(){$(r)}))}}),[p,j,Z,Q,S,x,g.mapType,K,$,m,X]),Object(y.useEffect)((function(){if(Z){var t=Object(k.a)(h.current),e=Object(z.b)().duration(l.c),r=[];p===l.l.BUBBLES&&(r=Z.map((function(t){var e=l.r[t.properties.st_nm],r=t.properties.district,n=j[e];if(f===l.k.STATES)t.value=W(n,v);else if(f===l.k.DISTRICTS){var i,a,c=null===n||void 0===n||null===(i=n.districts)||void 0===i?void 0:i[r];t.value=W(r?c:null===n||void 0===n||null===(a=n.districts)||void 0===a?void 0:a[l.D],v)}return t})).sort((function(t,e){return e.value-e.value}))),t.select(".circles").selectAll("circle").data(r,(function(t){return t.id})).join((function(t){return t.append("circle").attr("transform",(function(t){return"translate(".concat(K.centroid(t),")")})).attr("fill-opacity",.25).style("cursor","pointer").attr("pointer-events","all")}),(function(t){return t}),(function(t){return t.call((function(t){return t.transition(e).attr("r",0).remove()}))})).on("mouseenter",(function(t,e){tt.current||m({stateCode:l.r[e.properties.st_nm],districtName:f===l.k.STATES?null:e.properties.district||l.D})})).on("pointerdown",(function(t,e){tt.current===e?tt.current=null:tt.current=e,m({stateCode:l.r[e.properties.st_nm],districtName:f===l.k.STATES?null:e.properties.district||l.D})})).on("click",(function(t,e){t.stopPropagation(),tt.current||g.mapType===l.j.STATE||x.push("/state/".concat(l.r[e.properties.st_nm]).concat(window.innerWidth<769?"#MapExplorer":""))})).transition(e).attr("fill",l.u[v].color+"70").attr("stroke",l.u[v].color+"70").attr("r",(function(t){return G(t.value)}))}}),[g.mapType,p,f,j,Z,x,G,K,m,v]),Object(y.useEffect)((function(){if(S){var t=Object(k.a)(h.current),e=Object(z.b)().duration(l.c),r=[],n=[];g.mapType===l.j.COUNTRY&&((r=[q.b(S,S.objects.states)])[0].id="".concat(u,"-states")),(g.mapType===l.j.STATE||f===l.k.DISTRICTS&&p===l.l.CHOROPLETH)&&((n=[q.b(S,S.objects.districts)])[0].id="".concat(u,"-districts")),t.select(".state-borders").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(r,(function(t){return t.id})).join((function(t){return t.append("path").attr("d",K).attr("stroke","#fff0")}),(function(t){return t}),(function(t){return t.transition(e).attr("stroke","#fff0").remove()})).transition(e).attr("stroke",X.bind(c,"40")),t.select(".district-borders").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(n,(function(t){return t.id})).join((function(t){return t.append("path").attr("d",K).attr("d",K).attr("stroke","#fff0")}),(function(t){return t}),(function(t){return t.transition(e).attr("stroke","#fff0").remove()})).transition(e).attr("stroke",X.bind(c,"40"))}}),[S,g,u,p,f,v,K,X]),Object(y.useEffect)((function(){var t=b.stateCode,e=l.t[t],r=b.districtName,n=Object(k.a)(h.current);p===l.l.BUBBLES?n.select(".circles").selectAll("circle").attr("fill-opacity",(function(n){var i;return e===n.properties.st_nm&&(!r&&t!==u||r===(null===(i=n.properties)||void 0===i?void 0:i.district)||f===l.k.STATES||r===l.D&&!n.properties.district)?1:.25})):n.select(".regions").selectAll("path").each((function(n){var i,a=e===n.properties.st_nm&&(!r&&t!==u||r===(null===(i=n.properties)||void 0===i?void 0:i.district)||f===l.k.STATES);a&&this.parentNode.appendChild(this),Object(k.a)(this).attr("stroke-opacity",a?1:0)}))}),[S,j,u,f,p,b.stateCode,b.districtName,v]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"svg-parent",children:[Object(n.jsxs)("svg",{id:"chart",viewBox:"0 0 ".concat(432," ").concat(488),preserveAspectRatio:"xMidYMid meet",ref:h,children:[Object(n.jsx)("g",{className:"regions"}),Object(n.jsx)("g",{className:"state-borders"}),Object(n.jsx)("g",{className:"district-borders"}),Object(n.jsx)("g",{className:"circles"})]}),g.mapType===l.j.STATE&&!!W(null===(e=j[u])||void 0===e||null===(r=e.districts)||void 0===r?void 0:r[l.D],v)&&Object(n.jsxs)("div",{className:R()("disclaimer","is-".concat(v)),children:[Object(n.jsx)(w.a,{}),Object(n.jsx)("span",{children:O("District-wise data not available in state bulletin")})]})]}),G&&Object(n.jsx)(A,Object(i.a)({},{data:j,mapViz:p,mapScale:G,statistic:v})),Object(n.jsx)("svg",{style:{position:"absolute",height:0},children:Object(n.jsx)("defs",{children:Object(n.jsx)("filter",{id:"balance-color",colorInterpolationFilters:"sRGB",children:Object(n.jsx)("feColorMatrix",{type:"matrix",values:"0.91372549  0           0            0  0.08627451 0           0.91372549  0            0  0.08627451 0           0           0.854901961  0  0.145098039 0           0           0            1  0"})})})})]})}}}]);
//# sourceMappingURL=31.67bc70ee.chunk.js.map