{"version":3,"sources":["components/Tooltip.js","components/StateMetaCard.js","../node_modules/react-feather/dist/icons/compass.js","components/StateMeta.js"],"names":["Tooltip","data","children","useState","isTooltipVisible","setIsTooltipVisible","transitions","useTransition","from","TOOLTIP_FADE_OUT","enter","TOOLTIP_FADE_IN","leave","config","mass","tension","friction","handleClick","useCallback","e","stopPropagation","className","style","position","onMouseEnter","bind","onMouseLeave","onClick","map","item","key","props","div","dangerouslySetInnerHTML","__html","replace","StateMetaCard","title","statistic","total","formula","date","description","size","_extends","Object","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","Compass","forwardRef","_ref","ref","_ref$color","color","_ref$size","rest","React","createElement","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","points","propTypes","PropTypes","string","oneOfType","number","displayName","StateMeta","stateCode","timeseries","pastDates","filter","getIndiaDateYesterdayISO","lastDate","lastConfirmed","getStatistic","prevWeekConfirmed","prevWeekDate","formatISO","subDays","parseIndiaDate","confirmedPerMillion","perMillion","testPerMillion","totalConfirmedPerMillion","activePercent","recoveryPercent","deathPercent","growthRate","Math","pow","formatNumber","meta","population","href","round","STATE_NAMES","formatDate","formatLastUpdated","tested","isEqual","prevProps","currProps","memo"],"mappings":"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","file":"static/js/33.e5250909.chunk.js","sourcesContent":["import {TOOLTIP_FADE_IN, TOOLTIP_FADE_OUT} from '../animations';\n\nimport {useCallback, useState} from 'react';\nimport {useTransition, animated} from 'react-spring';\n\nconst Tooltip = ({data, children}) => {\n  const [isTooltipVisible, setIsTooltipVisible] = useState(false);\n\n  const transitions = useTransition(isTooltipVisible, null, {\n    from: TOOLTIP_FADE_OUT,\n    enter: TOOLTIP_FADE_IN,\n    leave: TOOLTIP_FADE_OUT,\n    config: {\n      mass: 1,\n      tension: 210,\n      friction: 20,\n    },\n  });\n\n  const handleClick = useCallback((e) => e.stopPropagation(), []);\n\n  return (\n    <span\n      className=\"Tooltip\"\n      style={{position: 'relative'}}\n      onMouseEnter={setIsTooltipVisible.bind(this, true)}\n      onMouseLeave={setIsTooltipVisible.bind(this, false)}\n      onClick={handleClick.bind(this)}\n    >\n      {children}\n\n      {transitions.map(({item, key, props}) =>\n        item ? (\n          <animated.div key={key} style={props}>\n            <div className=\"message\">\n              <p\n                dangerouslySetInnerHTML={{\n                  __html: data.replace(/\\n/g, '<br/>'),\n                }}\n              ></p>\n            </div>\n          </animated.div>\n        ) : (\n          <animated.div key={key}></animated.div>\n        )\n      )}\n    </span>\n  );\n};\n\nexport default Tooltip;\n","import Tooltip from './Tooltip';\n\nimport {InfoIcon} from '@primer/octicons-v2-react';\n\nfunction StateMetaCard({\n  title,\n  statistic,\n  total,\n  formula,\n  date,\n  description,\n  className,\n}) {\n  return (\n    <div className={`meta-item ${className}`}>\n      <div className=\"meta-item-top\">\n        <h3>{title}</h3>\n        <Tooltip {...{data: formula}}>\n          <InfoIcon size={16} />\n        </Tooltip>\n      </div>\n      <h1>{statistic}</h1>\n      <h5>{date}</h5>\n      {total && <h5>{`India has ${total} CPM`}</h5>}\n      <p>{description}</p>\n    </div>\n  );\n}\n\nexport default StateMetaCard;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Compass = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76\"\n  }));\n});\nCompass.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nCompass.displayName = 'Compass';\nexport default Compass;","import StateMetaCard from './StateMetaCard';\n\nimport {STATE_NAMES} from '../constants';\nimport {\n  formatDate,\n  formatNumber,\n  formatLastUpdated,\n  getStatistic,\n  getIndiaDateYesterdayISO,\n  parseIndiaDate,\n} from '../utils/commonFunctions';\n\nimport {formatISO, subDays} from 'date-fns';\nimport {memo} from 'react';\nimport {Compass} from 'react-feather';\n\nfunction StateMeta({stateCode, data, timeseries}) {\n  const pastDates = Object.keys(timeseries || {}).filter(\n    (date) => date <= getIndiaDateYesterdayISO()\n  );\n  const lastDate = pastDates[pastDates.length - 1];\n  const lastConfirmed = getStatistic(\n    timeseries?.[lastDate],\n    'total',\n    'confirmed'\n  );\n  const prevWeekConfirmed =\n    lastConfirmed - getStatistic(timeseries?.[lastDate], 'delta7', 'confirmed');\n\n  const prevWeekDate = formatISO(subDays(parseIndiaDate(lastDate), 7));\n\n  const confirmedPerMillion = getStatistic(\n    data[stateCode],\n    'total',\n    'confirmed',\n    {perMillion: true}\n  );\n  const testPerMillion = getStatistic(data[stateCode], 'total', 'tested', {\n    perMillion: true,\n  });\n  const totalConfirmedPerMillion = getStatistic(\n    data['TT'],\n    'total',\n    'confirmed',\n    {perMillion: true}\n  );\n\n  const activePercent = getStatistic(data[stateCode], 'total', 'activeRatio');\n  const recoveryPercent = getStatistic(\n    data[stateCode],\n    'total',\n    'recoveryRatio'\n  );\n  const deathPercent = getStatistic(data[stateCode], 'total', 'cfr');\n\n  const growthRate =\n    (Math.pow(lastConfirmed / prevWeekConfirmed, 1 / 7) - 1) * 100;\n\n  return (\n    <>\n      <div className=\"StateMeta population\">\n        <div className=\"meta-item population\">\n          <h3>Population</h3>\n          <h1>{formatNumber(data[stateCode]?.meta?.population)}</h1>\n        </div>\n        <div className=\"alert\">\n          <Compass />\n          <div className=\"alert-right\">\n            Based on 2019 population projection by NCP{' '}\n            <a\n              href=\"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf\"\n              target=\"_noblank\"\n            >\n              report\n            </a>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"StateMeta\">\n        <StateMetaCard\n          className=\"confirmed\"\n          title={'Confirmed Per Million'}\n          statistic={formatNumber(confirmedPerMillion)}\n          total={formatNumber(totalConfirmedPerMillion)}\n          formula={'(confirmed / state population) * 1 Million'}\n          description={`\n            ~${formatNumber(\n              Math.round(confirmedPerMillion)\n            )} out of every 10 lakh people in ${\n            STATE_NAMES[stateCode]\n          } have tested positive for the virus.\n            `}\n        />\n\n        <StateMetaCard\n          className=\"active\"\n          title={'Active Ratio'}\n          statistic={`${formatNumber(activePercent, '%')}`}\n          formula={'(active / confirmed) * 100'}\n          description={\n            activePercent > 0\n              ? `For every 100 confirmed cases, ~${formatNumber(\n                  Math.round(activePercent)\n                )} are currently infected.`\n              : 'Currently, there are no active cases in this state.'\n          }\n        />\n\n        <StateMetaCard\n          className=\"recovery\"\n          title={'Recovery Ratio'}\n          statistic={`${formatNumber(recoveryPercent, '%')}`}\n          formula={'(recovered / confirmed) * 100'}\n          description={\n            recoveryPercent > 0\n              ? `For every 100 confirmed cases, ~${formatNumber(\n                  Math.round(recoveryPercent)\n                )} have recovered from the virus.`\n              : 'Unfortunately, there are no recoveries in this state yet.'\n          }\n        />\n\n        <StateMetaCard\n          className=\"mortality\"\n          title={'Case Fatality Ratio'}\n          statistic={`${formatNumber(deathPercent, '%')}`}\n          formula={'(deceased / confirmed) * 100'}\n          description={\n            deathPercent > 0\n              ? `For every 100 confirmed cases, ~${formatNumber(\n                  Math.round(deathPercent)\n                )} have unfortunately passed away from the virus.`\n              : 'Fortunately, no one has passed away from the virus in this state.'\n          }\n        />\n\n        <StateMetaCard\n          className=\"gr\"\n          title={'Avg. Growth Rate'}\n          statistic={growthRate > 0 ? `${formatNumber(growthRate, '%')}` : '-'}\n          formula={\n            '(((previousDayData - sevenDayBeforeData) / sevenDayBeforeData) * 100)/7'\n          }\n          date={`${formatDate(prevWeekDate, 'dd MMM')} - ${formatDate(\n            lastDate,\n            'dd MMM'\n          )}`}\n          description={\n            growthRate > 0\n              ? `In the last one week, the number of new infections has\n              grown by an average of ${formatNumber(growthRate, '%')}\n              every day.`\n              : 'There has been no growth in the number of infections in last one week.'\n          }\n        />\n\n        <StateMetaCard\n          className=\"tpm\"\n          title={'Tests Per Million'}\n          statistic={`${formatNumber(testPerMillion)}`}\n          formula={\n            '(total tests in state / total population of state) * 1 Million'\n          }\n          date={\n            testPerMillion\n              ? `As of ${formatLastUpdated(\n                  data[stateCode]?.meta?.tested?.['last_updated']\n                )} ago`\n              : ''\n          }\n          description={\n            testPerMillion > 0\n              ? `For every 10 lakh people in ${STATE_NAMES[stateCode]},\n                ~${formatNumber(\n                  Math.round(testPerMillion)\n                )} samples were tested.`\n              : 'No tests have been conducted in this state yet.'\n          }\n        />\n      </div>\n    </>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (currProps.timeseries && !prevProps.timeseries) {\n    return false;\n  } else if (prevProps.stateCode !== currProps.stateCode) {\n    return false;\n  }\n  return true;\n};\n\nexport default memo(StateMeta, isEqual);\n"],"sourceRoot":""}